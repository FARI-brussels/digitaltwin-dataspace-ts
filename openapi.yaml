openapi: "3.0.3"
info:
  title: FARI Digital Twin API
  version: "1.0.0"
  description: API documentation for digital_twin_ts
paths:
  /api/assets:
    get:
      summary: List all assets_manager assets
      description: Manage assets
      tags:
        - Assets
      responses:
        200:
          description: List of assets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/AssetResponse"
    post:
      summary: Upload a new assets_manager asset
      description: Upload a new asset file with metadata. Requires authentication.
      tags:
        - Assets
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
                - description
                - source
              properties:
                file:
                  type: string
                  format: binary
                  description: The file to upload
                description:
                  type: string
                  description: Asset description
                source:
                  type: string
                  format: uri
                  description: Source URL for provenance
                is_public:
                  type: boolean
                  description: "Whether asset is public (default: true)"
      responses:
        200:
          description: Asset uploaded successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        400:
          description: Bad request - missing or invalid fields
        401:
          description: Unauthorized - authentication required
  "/api/assets/{id}":
    get:
      summary: Get assets_manager asset by ID
      description: Returns the asset file content
      tags:
        - Assets
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset file content
          content:
            model/gltf-binary:
              schema:
                type: string
                format: binary
        404:
          description: Asset not found
    put:
      summary: Update assets_manager asset metadata
      description: Update asset description, source, or visibility. Requires authentication and ownership.
      tags:
        - Assets
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  type: string
                source:
                  type: string
                  format: uri
                is_public:
                  type: boolean
      responses:
        200:
          description: Asset updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        400:
          description: Bad request
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Asset not found
    delete:
      summary: Delete assets_manager asset
      description: Delete an asset. Requires authentication and ownership.
      tags:
        - Assets
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Asset not found
  "/api/assets/{id}/download":
    get:
      summary: Download assets_manager asset
      description: Download the asset file with Content-Disposition header
      tags:
        - Assets
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset file download
          content:
            model/gltf-binary:
              schema:
                type: string
                format: binary
        404:
          description: Asset not found
  /api/assets/batch:
    post:
      summary: Batch upload assets_manager assets
      description: Upload multiple assets in one request. Files must be base64 encoded.
      tags:
        - Assets
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - requests
              properties:
                requests:
                  type: array
                  items:
                    type: object
                    required:
                      - file
                      - description
                      - source
                      - filename
                    properties:
                      file:
                        type: string
                        format: byte
                        description: Base64 encoded file
                      filename:
                        type: string
                      description:
                        type: string
                      source:
                        type: string
                        format: uri
                      is_public:
                        type: boolean
      responses:
        200:
          description: All assets uploaded successfully
        207:
          description: Partial success - some uploads failed
        400:
          description: Bad request
        401:
          description: Unauthorized
    delete:
      summary: Batch delete assets_manager assets
      description: Delete multiple assets by IDs. Requires authentication and ownership. Pass IDs as comma-separated query parameter.
      tags:
        - Assets
      security:
        - ApiKeyAuth: []
      parameters:
        - name: ids
          in: query
          required: true
          schema:
            type: string
          description: Comma-separated list of asset IDs to delete (e.g., 1,2,3)
      responses:
        200:
          description: All assets deleted successfully
        207:
          description: Partial success - some deletions failed
        400:
          description: Bad request
        401:
          description: Unauthorized
  /api/bolt/geofence:
    get:
      summary: Get bolt_geofence_collector data
      description: Collecte les zones de géorepérage Bolt à Bruxelles
      tags:
        - Bolt
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/bolt/vehicle-position:
    get:
      summary: Get bolt_vehicle_position_collector data
      description: Collecte les positions des véhicules Bolt à Bruxelles
      tags:
        - Bolt
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/bolt/vehicle-type:
    get:
      summary: Get bolt_vehicle_type_collector data
      description: Collecte les types de véhicules Bolt à Bruxelles
      tags:
        - Bolt
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/brussels-mobility/bike-counters:
    get:
      summary: Get brussels_mobility_bike_counters_collector data
      description: Collecte les métadonnées des compteurs vélo de Brussels Mobility
      tags:
        - Brussels
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/brussels-mobility/bike-counts:
    get:
      summary: Get brussels_mobility_bike_counts_collector data
      description: Collecte les comptages vélo en temps réel de Brussels Mobility
      tags:
        - Brussels
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/brussels-mobility/traffic-counts:
    get:
      summary: Get brussels_mobility_traffic_counts_collector data
      description: Collecte les comptages trafic en temps réel de Brussels Mobility
      tags:
        - Brussels
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/brussels-mobility/traffic-devices:
    get:
      summary: Get brussels_mobility_traffic_devices_collector data
      description: Collecte les métadonnées des compteurs trafic de Brussels Mobility
      tags:
        - Brussels
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/delijn/gtfs-realtime:
    get:
      summary: Get delijn_gtfs_realtime_collector data
      description: Collecte les données GTFS temps réel de De Lijn
      tags:
        - DeLijn
      responses:
        200:
          description: Latest collected data
          content:
            application/x-protobuf:
              schema:
                type: object
        404:
          description: No data available
  /api/delijn/gtfs-static:
    get:
      summary: Get delijn_gtfs_static_collector data
      description: Collecte les données GTFS statiques de De Lijn
      tags:
        - DeLijn
      responses:
        200:
          description: Latest collected data
          content:
            application/zip:
              schema:
                type: object
        404:
          description: No data available
  /api/digital_terrain:
    get:
      summary: List all digital_terrain_manager assets
      description: Manage digital terrain
      tags:
        - DigitalTerrain
      responses:
        200:
          description: List of assets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TilesetResponse"
    post:
      summary: Upload a new digital_terrain_manager asset
      description: Upload a new asset file with metadata. Requires authentication.
      tags:
        - DigitalTerrain
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
                - description
                - source
              properties:
                file:
                  type: string
                  format: binary
                  description: The file to upload
                description:
                  type: string
                  description: Asset description
                source:
                  type: string
                  format: uri
                  description: Source URL for provenance
                is_public:
                  type: boolean
                  description: "Whether asset is public (default: true)"
      responses:
        200:
          description: Tileset uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  tileset_name:
                    type: string
                    description: Extracted tileset name
                  file_count:
                    type: integer
                    description: Number of files in the tileset
        400:
          description: Bad request - missing or invalid fields
        401:
          description: Unauthorized - authentication required
  "/api/digital_terrain/{id}":
    get:
      summary: Get digital_terrain_manager asset by ID
      description: Returns the asset file content
      tags:
        - DigitalTerrain
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset file content
          content:
            application/json:
              schema:
                type: string
                format: binary
        404:
          description: Asset not found
    put:
      summary: Update digital_terrain_manager asset metadata
      description: Update asset description, source, or visibility. Requires authentication and ownership.
      tags:
        - DigitalTerrain
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  type: string
                source:
                  type: string
                  format: uri
                is_public:
                  type: boolean
      responses:
        200:
          description: Asset updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        400:
          description: Bad request
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Asset not found
    delete:
      summary: Delete digital_terrain_manager asset
      description: Delete an asset. Requires authentication and ownership.
      tags:
        - DigitalTerrain
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Asset not found
  "/api/digital_terrain/{id}/download":
    get:
      summary: Download digital_terrain_manager asset
      description: Download the asset file with Content-Disposition header
      tags:
        - DigitalTerrain
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset file download
          content:
            application/json:
              schema:
                type: string
                format: binary
        404:
          description: Asset not found
  /api/digital_terrain/batch:
    post:
      summary: Batch upload digital_terrain_manager assets
      description: Upload multiple assets in one request. Files must be base64 encoded.
      tags:
        - DigitalTerrain
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - requests
              properties:
                requests:
                  type: array
                  items:
                    type: object
                    required:
                      - file
                      - description
                      - source
                      - filename
                    properties:
                      file:
                        type: string
                        format: byte
                        description: Base64 encoded file
                      filename:
                        type: string
                      description:
                        type: string
                      source:
                        type: string
                        format: uri
                      is_public:
                        type: boolean
      responses:
        200:
          description: All assets uploaded successfully
        207:
          description: Partial success - some uploads failed
        400:
          description: Bad request
        401:
          description: Unauthorized
    delete:
      summary: Batch delete digital_terrain_manager assets
      description: Delete multiple assets by IDs. Requires authentication and ownership. Pass IDs as comma-separated query parameter.
      tags:
        - DigitalTerrain
      security:
        - ApiKeyAuth: []
      parameters:
        - name: ids
          in: query
          required: true
          schema:
            type: string
          description: Comma-separated list of asset IDs to delete (e.g., 1,2,3)
      responses:
        200:
          description: All assets deleted successfully
        207:
          description: Partial success - some deletions failed
        400:
          description: Bad request
        401:
          description: Unauthorized
  /api/dott/geofence:
    get:
      summary: Get dott_geofence_collector data
      description: Collecte les zones de géorepérage Dott à Bruxelles
      tags:
        - Dott
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/dott/vehicle-position:
    get:
      summary: Get dott_vehicle_position_collector data
      description: Collecte les positions des véhicules Dott à Bruxelles
      tags:
        - Dott
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/dott/vehicle-type:
    get:
      summary: Get dott_vehicle_type_collector data
      description: Collecte les types de véhicules Dott à Bruxelles
      tags:
        - Dott
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/energy:
    get:
      summary: Get energy data
      description: Data collector for energy
      tags:
        - energy
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/fixmystreet/history:
    get:
      summary: Get fixmystreet_history_harvester harvested data
      description: Compares FixMyStreet versions to detect updates
      tags:
        - FixMyStreet
      responses:
        200:
          description: Latest harvested data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/fixmystreet/incidents:
    get:
      summary: Get fixmystreet_collector data
      description: Collects incident data from FixMyStreet Brussels
      tags:
        - FixMyStreet
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/infrabel/line-sections:
    get:
      summary: Get infrabel_line_section_collector data
      description: Collecte les sections de lignes du réseau Infrabel (GeoJSON)
      tags:
        - Infrabel
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/infrabel/operational-points:
    get:
      summary: Get infrabel_operational_points_collector data
      description: Collecte les points opérationnels du réseau Infrabel (GeoJSON)
      tags:
        - Infrabel
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/infrabel/punctuality:
    get:
      summary: Get infrabel_punctuality_collector data
      description: Collecte les données de ponctualité D-1 du réseau Infrabel (JSON)
      tags:
        - Infrabel
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/infrabel/segments:
    get:
      summary: Get infrabel_segments_collector data
      description: Collecte les segments station à station du réseau Infrabel (GeoJSON)
      tags:
        - Infrabel
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/irceline_sos:
    get:
      summary: Get irceline_sos data
      description: Data collector for IRCELINE air quality data
      tags:
        - irceline_sos
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/lime/vehicle-position:
    get:
      summary: Get lime_vehicle_position_collector data
      description: Collecte les positions des véhicules Lime à Bruxelles
      tags:
        - Lime
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/lime/vehicle-type:
    get:
      summary: Get lime_vehicle_type_collector data
      description: Collecte les types de véhicules Lime à Bruxelles
      tags:
        - Lime
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/opensky:
    get:
      summary: Get opensky_collector data
      description: Collects data from OpenSky APIs
      tags:
        - OpenSky+
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/pointclouds:
    get:
      summary: List all pointcloud_manager assets
      description: Manage point clouds
      tags:
        - PointCloud
      responses:
        200:
          description: List of assets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/AssetResponse"
    post:
      summary: Upload a new pointcloud_manager asset
      description: Upload a new asset file with metadata. Requires authentication.
      tags:
        - PointCloud
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
                - description
                - source
              properties:
                file:
                  type: string
                  format: binary
                  description: The file to upload
                description:
                  type: string
                  description: Asset description
                source:
                  type: string
                  format: uri
                  description: Source URL for provenance
                is_public:
                  type: boolean
                  description: "Whether asset is public (default: true)"
      responses:
        200:
          description: Asset uploaded successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        400:
          description: Bad request - missing or invalid fields
        401:
          description: Unauthorized - authentication required
  "/api/pointclouds/{id}":
    get:
      summary: Get pointcloud_manager asset by ID
      description: Returns the asset file content
      tags:
        - PointCloud
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset file content
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        404:
          description: Asset not found
    put:
      summary: Update pointcloud_manager asset metadata
      description: Update asset description, source, or visibility. Requires authentication and ownership.
      tags:
        - PointCloud
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  type: string
                source:
                  type: string
                  format: uri
                is_public:
                  type: boolean
      responses:
        200:
          description: Asset updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        400:
          description: Bad request
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Asset not found
    delete:
      summary: Delete pointcloud_manager asset
      description: Delete an asset. Requires authentication and ownership.
      tags:
        - PointCloud
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Asset not found
  "/api/pointclouds/{id}/download":
    get:
      summary: Download pointcloud_manager asset
      description: Download the asset file with Content-Disposition header
      tags:
        - PointCloud
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset file download
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        404:
          description: Asset not found
  /api/pointclouds/batch:
    post:
      summary: Batch upload pointcloud_manager assets
      description: Upload multiple assets in one request. Files must be base64 encoded.
      tags:
        - PointCloud
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - requests
              properties:
                requests:
                  type: array
                  items:
                    type: object
                    required:
                      - file
                      - description
                      - source
                      - filename
                    properties:
                      file:
                        type: string
                        format: byte
                        description: Base64 encoded file
                      filename:
                        type: string
                      description:
                        type: string
                      source:
                        type: string
                        format: uri
                      is_public:
                        type: boolean
      responses:
        200:
          description: All assets uploaded successfully
        207:
          description: Partial success - some uploads failed
        400:
          description: Bad request
        401:
          description: Unauthorized
    delete:
      summary: Batch delete pointcloud_manager assets
      description: Delete multiple assets by IDs. Requires authentication and ownership. Pass IDs as comma-separated query parameter.
      tags:
        - PointCloud
      security:
        - ApiKeyAuth: []
      parameters:
        - name: ids
          in: query
          required: true
          schema:
            type: string
          description: Comma-separated list of asset IDs to delete (e.g., 1,2,3)
      responses:
        200:
          description: All assets deleted successfully
        207:
          description: Partial success - some deletions failed
        400:
          description: Bad request
        401:
          description: Unauthorized
  /api/pony/geofence:
    get:
      summary: Get pony_geofence_collector data
      description: Collecte les zones de géorepérage Pony à Bruxelles
      tags:
        - Pony
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/pony/vehicle-position:
    get:
      summary: Get pony_vehicle_position_collector data
      description: Collecte les positions des véhicules Pony à Bruxelles
      tags:
        - Pony
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/pony/vehicle-type:
    get:
      summary: Get pony_vehicle_type_collector data
      description: Collecte les types de véhicules Pony à Bruxelles
      tags:
        - Pony
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/sncb/gtfs-realtime:
    get:
      summary: Get sncb_gtfs_realtime_collector data
      description: Collecte les données GTFS temps réel de la SNCB
      tags:
        - SNCB
      responses:
        200:
          description: Latest collected data
          content:
            application/x-protobuf:
              schema:
                type: object
        404:
          description: No data available
  /api/sncb/gtfs-static:
    get:
      summary: Get sncb_gtfs_static_collector data
      description: Collecte les données GTFS statiques de la SNCB
      tags:
        - SNCB
      responses:
        200:
          description: Latest collected data
          content:
            application/zip:
              schema:
                type: object
        404:
          description: No data available
  /api/stib/gtfs:
    get:
      summary: Get stib_gtfs_collector data
      description: Collecte les données GTFS statiques de la STIB pour Bruxelles
      tags:
        - STIB
      responses:
        200:
          description: Latest collected data
          content:
            application/zip:
              schema:
                type: object
        404:
          description: No data available
  /api/stib/shapefiles:
    get:
      summary: Get stib_shapefiles_collector data
      description: Collecte les shapefiles du réseau STIB en format GeoJSON
      tags:
        - STIB
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/stib/stops:
    get:
      summary: Get stib_stops_collector data
      description: Collecte les arrêts STIB avec coordonnées géographiques
      tags:
        - STIB
      responses:
        200:
          description: Latest collected data
          content:
            application/geo+json:
              schema:
                type: object
        404:
          description: No data available
  /api/stib/vehicle-positions:
    get:
      summary: Get stib_vehicle_positions_collector data
      description: Collecte les positions des véhicules STIB en temps réel
      tags:
        - STIB
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/sensor-community:
    get:
      summary: Get sensor_community_collector data
      description: Collects data from Sensor Community APIs
      tags:
        - Sensor Community
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/sibelga:
    get:
      summary: Get sibelga_collector data
      description: Collects data from Sibelga APIs
      tags:
        - Sibelga
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/tec/gtfs-realtime:
    get:
      summary: Get tec_gtfs_realtime_collector data
      description: Collecte les données GTFS temps réel de TEC
      tags:
        - TEC
      responses:
        200:
          description: Latest collected data
          content:
            application/x-protobuf:
              schema:
                type: object
        404:
          description: No data available
  /api/tec/gtfs-static:
    get:
      summary: Get tec_gtfs_static_collector data
      description: Collecte les données GTFS statiques de TEC
      tags:
        - TEC
      responses:
        200:
          description: Latest collected data
          content:
            application/zip:
              schema:
                type: object
        404:
          description: No data available
  /api/telraam/traffic:
    get:
      summary: Get telraam_traffic_collector data
      description: "Collecte les données de trafic en temps réel depuis l'API Telraam"
      tags:
        - Telraam
      responses:
        200:
          description: Latest collected data
          content:
            application/json:
              schema:
                type: object
        404:
          description: No data available
  /api/tilesets:
    get:
      summary: List all tilesets_manager assets
      description: Manage tilesets
      tags:
        - Tileset
      responses:
        200:
          description: List of assets
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TilesetResponse"
    post:
      summary: Upload a new tilesets_manager asset
      description: Upload a new asset file with metadata. Requires authentication.
      tags:
        - Tileset
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
                - description
                - source
              properties:
                file:
                  type: string
                  format: binary
                  description: The file to upload
                description:
                  type: string
                  description: Asset description
                source:
                  type: string
                  format: uri
                  description: Source URL for provenance
                is_public:
                  type: boolean
                  description: "Whether asset is public (default: true)"
      responses:
        200:
          description: Tileset uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  tileset_name:
                    type: string
                    description: Extracted tileset name
                  file_count:
                    type: integer
                    description: Number of files in the tileset
        400:
          description: Bad request - missing or invalid fields
        401:
          description: Unauthorized - authentication required
  "/api/tilesets/{id}":
    get:
      summary: Get tilesets_manager asset by ID
      description: Returns the asset file content
      tags:
        - Tileset
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset file content
          content:
            application/json:
              schema:
                type: string
                format: binary
        404:
          description: Asset not found
    put:
      summary: Update tilesets_manager asset metadata
      description: Update asset description, source, or visibility. Requires authentication and ownership.
      tags:
        - Tileset
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                description:
                  type: string
                source:
                  type: string
                  format: uri
                is_public:
                  type: boolean
      responses:
        200:
          description: Asset updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        400:
          description: Bad request
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Asset not found
    delete:
      summary: Delete tilesets_manager asset
      description: Delete an asset. Requires authentication and ownership.
      tags:
        - Tileset
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Asset not found
  "/api/tilesets/{id}/download":
    get:
      summary: Download tilesets_manager asset
      description: Download the asset file with Content-Disposition header
      tags:
        - Tileset
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: Asset ID
      responses:
        200:
          description: Asset file download
          content:
            application/json:
              schema:
                type: string
                format: binary
        404:
          description: Asset not found
  /api/tilesets/batch:
    post:
      summary: Batch upload tilesets_manager assets
      description: Upload multiple assets in one request. Files must be base64 encoded.
      tags:
        - Tileset
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - requests
              properties:
                requests:
                  type: array
                  items:
                    type: object
                    required:
                      - file
                      - description
                      - source
                      - filename
                    properties:
                      file:
                        type: string
                        format: byte
                        description: Base64 encoded file
                      filename:
                        type: string
                      description:
                        type: string
                      source:
                        type: string
                        format: uri
                      is_public:
                        type: boolean
      responses:
        200:
          description: All assets uploaded successfully
        207:
          description: Partial success - some uploads failed
        400:
          description: Bad request
        401:
          description: Unauthorized
    delete:
      summary: Batch delete tilesets_manager assets
      description: Delete multiple assets by IDs. Requires authentication and ownership. Pass IDs as comma-separated query parameter.
      tags:
        - Tileset
      security:
        - ApiKeyAuth: []
      parameters:
        - name: ids
          in: query
          required: true
          schema:
            type: string
          description: Comma-separated list of asset IDs to delete (e.g., 1,2,3)
      responses:
        200:
          description: All assets deleted successfully
        207:
          description: Partial success - some deletions failed
        400:
          description: Bad request
        401:
          description: Unauthorized
  /wms_layers:
    get:
      summary: List all wms_layers records
      description: Manage WMS layers for mapping applications
      tags:
        - wms_layers
      responses:
        200:
          description: List of records
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/wms_layersRecord"
    post:
      summary: Create a new wms_layers record
      description: Create a new record. Requires authentication.
      tags:
        - wms_layers
      security:
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/wms_layersInput"
      responses:
        201:
          description: Record created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: integer
                  message:
                    type: string
        400:
          description: Bad request
        401:
          description: Unauthorized
  "/wms_layers/{id}":
    get:
      summary: Get wms_layers record by ID
      description: Returns a single record
      tags:
        - wms_layers
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: Record ID
      responses:
        200:
          description: Record details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/wms_layersRecord"
        404:
          description: Record not found
    put:
      summary: Update wms_layers record
      description: Update a record. Requires authentication and ownership.
      tags:
        - wms_layers
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: Record ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/wms_layersInput"
      responses:
        200:
          description: Record updated successfully
        400:
          description: Bad request
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Record not found
    delete:
      summary: Delete wms_layers record
      description: Delete a record. Requires authentication and ownership.
      tags:
        - wms_layers
      security:
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: Record ID
      responses:
        200:
          description: Record deleted successfully
        401:
          description: Unauthorized
        403:
          description: Forbidden - not owner
        404:
          description: Record not found
  /wms_layers/servers/grouped:
    get:
      summary: "Custom endpoint: /servers/grouped"
      tags:
        - wms_layers
      responses:
        200:
          description: Successful response
  "/wms_layers/servers/:wmsUrl/layers":
    get:
      summary: "Custom endpoint: /servers/:wmsUrl/layers"
      tags:
        - wms_layers
      responses:
        200:
          description: Successful response
    delete:
      summary: "Custom endpoint: /servers/:wmsUrl/layers"
      tags:
        - wms_layers
      responses:
        200:
          description: Successful response
    post:
      summary: "Custom endpoint: /servers/:wmsUrl/layers"
      tags:
        - wms_layers
      responses:
        200:
          description: Successful response
  "/wms_layers/layers/:id/toggle":
    put:
      summary: "Custom endpoint: /layers/:id/toggle"
      tags:
        - wms_layers
      responses:
        200:
          description: Successful response
  /wms_layers/bulk:
    post:
      summary: "Custom endpoint: /bulk"
      tags:
        - wms_layers
      responses:
        200:
          description: Successful response
servers:
  - url: "https://newdata.digitaltwin.brussels"
tags:
  - name: Assets
    description: Manage assets
  - name: Bolt
    description: Collecte les zones de géorepérage Bolt à Bruxelles
  - name: Brussels
    description: Collecte les métadonnées des compteurs vélo de Brussels Mobility
  - name: DeLijn
    description: Collecte les données GTFS temps réel de De Lijn
  - name: DigitalTerrain
    description: Manage digital terrain
  - name: Dott
    description: Collecte les zones de géorepérage Dott à Bruxelles
  - name: energy
    description: Data collector for energy
  - name: FixMyStreet
    description: Compares FixMyStreet versions to detect updates
  - name: Infrabel
    description: Collecte les sections de lignes du réseau Infrabel (GeoJSON)
  - name: irceline_sos
    description: Data collector for IRCELINE air quality data
  - name: Lime
    description: Collecte les positions des véhicules Lime à Bruxelles
  - name: OpenSky+
    description: Collects data from OpenSky APIs
  - name: PointCloud
    description: Manage point clouds
  - name: Pony
    description: Collecte les zones de géorepérage Pony à Bruxelles
  - name: Sensor Community
    description: Collects data from Sensor Community APIs
  - name: Sibelga
    description: Collects data from Sibelga APIs
  - name: SNCB
    description: Collecte les données GTFS temps réel de la SNCB
  - name: STIB
    description: Collecte les données GTFS statiques de la STIB pour Bruxelles
  - name: TEC
    description: Collecte les données GTFS temps réel de TEC
  - name: Telraam
    description: "Collecte les données de trafic en temps réel depuis l'API Telraam"
  - name: Tileset
    description: Manage tilesets
  - name: wms_layers
    description: Manage WMS layers for mapping applications
components:
  schemas:
    AssetResponse:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        date:
          type: string
          format: date-time
        contentType:
          type: string
        description:
          type: string
        source:
          type: string
        owner_id:
          type: integer
          nullable: true
        filename:
          type: string
        is_public:
          type: boolean
        url:
          type: string
        download_url:
          type: string
    SuccessResponse:
      type: object
      properties:
        message:
          type: string
    TilesetResponse:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        date:
          type: string
          format: date-time
        contentType:
          type: string
        description:
          type: string
        source:
          type: string
        owner_id:
          type: integer
          nullable: true
        filename:
          type: string
        tileset_name:
          type: string
          description: Extracted tileset name from ZIP
        file_count:
          type: integer
          description: Number of files in the tileset
        has_metadata:
          type: boolean
          description: Whether tileset has metadata file
        main_files:
          type: array
          items:
            type: string
          description: Main tileset files (e.g., tileset.json)
        url:
          type: string
        download_url:
          type: string
    wms_layersRecord:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        owner_id:
          type: integer
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
        wms_url:
          type: string
        layer_name:
          type: string
        description:
          type: string
        active:
          type: boolean
    wms_layersInput:
      type: object
      properties:
        wms_url:
          type: string
        layer_name:
          type: string
        description:
          type: string
        active:
          type: boolean
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: x-user-id
      description: Keycloak user ID (forwarded by APISIX)